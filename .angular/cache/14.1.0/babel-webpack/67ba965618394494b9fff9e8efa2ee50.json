{"ast":null,"code":"import _asyncToGenerator from \"/Users/awaadchaudhry/Desktop/Coding/Projects/dovShop/dovShop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./tab2.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./tab2.page.scss?ngResource\";\nimport { Component, ViewChild } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { IonModal, LoadingController } from '@ionic/angular';\nimport { ServeService } from '../serve.service';\nimport { AlertController } from '@ionic/angular';\nimport { HttpClient } from '@angular/common/http';\nimport { InAppBrowser } from '@awesome-cordova-plugins/in-app-browser/ngx';\nlet Tab2Page = class Tab2Page {\n  constructor(storage, alertController, http, serve, loadingCtrl, iab) {\n    this.storage = storage;\n    this.alertController = alertController;\n    this.http = http;\n    this.serve = serve;\n    this.loadingCtrl = loadingCtrl;\n    this.iab = iab;\n    this.message = 'This modal example uses triggers to automatically open a modal when the button is clicked.';\n    this.isModalOpen = false;\n    this.isModalOpen2 = false;\n    this.arr = [];\n    this.urlList = [];\n    this.deflist = [];\n  }\n\n  ngOnInit() {}\n\n  ionViewDidEnter() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.loadData();\n\n      _this.getDefSource();\n    })();\n  }\n\n  ionViewDidLeave() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.sourceList = [];\n      _this2.urlList = [];\n    })();\n  }\n\n  showLoading() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const loading = yield _this3.loadingCtrl.create({\n        message: 'Installing Source...',\n        duration: 1000,\n        spinner: 'circles'\n      });\n      setTimeout(() => {\n        _this3.loadData();\n      }, 1000);\n      loading.present();\n    })();\n  }\n\n  showLoading2(i) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      const loading = yield _this4.loadingCtrl.create({\n        message: 'Removing Sources...',\n        duration: 1000,\n        spinner: 'circles'\n      });\n      loading.present();\n      setTimeout(() => {\n        _this4.removeItem(i); // window.location.reload();\n\n      }, 1000);\n    })();\n  }\n\n  openModal(i) {\n    this.setOpen(true);\n    this.list = this.sourceList[i].packages; //console.log(this.list);\n  }\n\n  setOpen(isOpen) {\n    this.isModalOpen = isOpen;\n  }\n\n  setOpen2(isOpen) {\n    this.isModalOpen2 = isOpen;\n  }\n\n  getSourceData() {\n    return this.http.get(this.alertData);\n  }\n\n  onWillDismiss(event) {\n    const ev = event;\n\n    if (ev.detail.role === 'confirm') {\n      this.message = `Hello`;\n    }\n  }\n\n  getDefSource() {\n    this.serve.getSourceData('https://wayofvod.com/dovshop/source.json').subscribe(data => {\n      this.deflist = data['sources'].packages;\n      console.log(this.deflist); //console.log(this.deflist)\n    });\n  }\n\n  removeItem(i) {\n    //this.storage.remove('source');\n    //this.sourceList = null;\n    this.sourceList.splice(i, 1);\n    this.storage.set('source', this.sourceList);\n    this.urlList.splice(i, 1);\n    this.storage.set('url', this.urlList);\n  }\n\n  getData(str) {\n    this.loadData();\n    this.serve.getSourceData(str).subscribe(data => {\n      this.addList = data['sources'];\n      const item = this.addList[0];\n      this.arr.push(item);\n      this.storage.set('source', this.arr);\n    });\n  }\n\n  loadData() {\n    this.storage.get('source').then(res => {\n      if (!res) {\n        this.sourceList = [];\n        this.arr = [];\n      } else {\n        this.sourceList = res;\n        this.arr = res;\n      }\n    });\n    this.storage.get('url').then(res => {\n      if (!res) {\n        this.urlList = [];\n      } else {\n        this.urlList = res;\n      }\n    });\n  }\n\n  addSource() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const alert = yield _this5.alertController.create({\n        header: 'Add Source',\n        subHeader: 'Enter dovShop Source URL',\n        buttons: [{\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            console.log('Confirm Cancel');\n          }\n        }, {\n          text: 'Ok',\n          handler: aData => {\n            _this5.alertData = aData.source;\n\n            _this5.getData(_this5.alertData);\n\n            _this5.showLoading();\n\n            _this5.urlList.push(_this5.alertData);\n\n            console.log(_this5.urlList);\n\n            _this5.storage.set('url', _this5.urlList);\n          }\n        }],\n        inputs: [{\n          type: 'url',\n          name: 'source',\n          value: 'https://'\n        }]\n      });\n      yield alert.present();\n    })();\n  }\n\n  openBrowser(url) {\n    const browser = this.iab.create(url, '_blank', 'location=yes,toolbarposition=top,toolbartranslucent=no');\n  }\n\n};\n\nTab2Page.ctorParameters = () => [{\n  type: Storage\n}, {\n  type: AlertController\n}, {\n  type: HttpClient\n}, {\n  type: ServeService\n}, {\n  type: LoadingController\n}, {\n  type: InAppBrowser\n}];\n\nTab2Page.propDecorators = {\n  modal: [{\n    type: ViewChild,\n    args: [IonModal]\n  }]\n};\nTab2Page = __decorate([Component({\n  selector: 'app-tab2',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], Tab2Page);\nexport { Tab2Page };","map":{"version":3,"mappings":"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","names":["Component","ViewChild","Storage","IonModal","LoadingController","ServeService","AlertController","HttpClient","InAppBrowser","Tab2Page","constructor","storage","alertController","http","serve","loadingCtrl","iab","ngOnInit","ionViewDidEnter","loadData","getDefSource","ionViewDidLeave","sourceList","urlList","showLoading","loading","create","message","duration","spinner","setTimeout","present","showLoading2","i","removeItem","openModal","setOpen","list","packages","isOpen","isModalOpen","setOpen2","isModalOpen2","getSourceData","get","alertData","onWillDismiss","event","ev","detail","role","subscribe","data","deflist","console","log","splice","set","getData","str","addList","item","arr","push","then","res","addSource","alert","header","subHeader","buttons","text","cssClass","handler","aData","source","inputs","type","name","value","openBrowser","url","browser","args","selector","template"],"sourceRoot":"","sources":["/Users/awaadchaudhry/Desktop/Coding/Projects/dovShop/dovShop/src/app/tab2/tab2.page.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild, AfterViewInit } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { IonModal, LoadingController } from '@ionic/angular';\nimport { v4 as uuidv4 } from 'uuid';\nimport { StorageItem } from '../shared/storage-item';\nimport { ServeService } from '../serve.service';\nimport { AlertController } from '@ionic/angular';\nimport { HttpClient } from '@angular/common/http';\nimport { OverlayEventDetail } from '@ionic/core/components';\nimport { InAppBrowser } from '@awesome-cordova-plugins/in-app-browser/ngx';\n\n\n@Component({\n  selector: 'app-tab2',\n  templateUrl: 'tab2.page.html',\n  styleUrls: ['tab2.page.scss']\n})\nexport class Tab2Page {\n  @ViewChild(IonModal) modal: IonModal;\n  message = 'This modal example uses triggers to automatically open a modal when the button is clicked.';\n  name: string;\n  isModalOpen = false;\n  isModalOpen2 = false;\n  arr: StorageItem[] = [];\n  state: any;\n  alertData: string;\n  sourceList: StorageItem[];\n  addList: StorageItem[];\n  emptyItem: StorageItem;\n  urlList: string[] = [];\n  list: any;\n  deflist: string[] = [];\n  constructor(private storage: Storage,\n    private alertController: AlertController,\n    private http:HttpClient, \n    private serve: ServeService,\n    private loadingCtrl: LoadingController,\n    private iab:InAppBrowser) {  }\n\n  ngOnInit() {\n  }\n\n  async ionViewDidEnter() {\n    this.loadData();\n    this.getDefSource();\n  }\n\n  async ionViewDidLeave() {\n    this.sourceList = [];\n    this.urlList = [];\n  }\n\n  \n  async showLoading() {\n    const loading = await this.loadingCtrl.create({\n      message: 'Installing Source...',\n      duration: 1000,\n      spinner: 'circles'\n    });\n    setTimeout(() => {\n      this.loadData();\n    }, 1000)\n    loading.present();\n  }\n\n  async showLoading2(i: any) {\n    const loading = await this.loadingCtrl.create({\n      message: 'Removing Sources...',\n      duration: 1000,\n      spinner: 'circles'\n    });\n    \n    loading.present();\n    setTimeout(() => {\n      this.removeItem(i);\n      // window.location.reload();\n    }, 1000)\n\n  }\n\n  openModal(i: any) {\n    this.setOpen(true);\n    this.list = this.sourceList[i].packages;\n    //console.log(this.list);\n  }\n\n  setOpen(isOpen: boolean) {\n    this.isModalOpen = isOpen;\n  }\n\n  setOpen2(isOpen: boolean) {\n    this.isModalOpen2 = isOpen;\n  }\n\n  getSourceData() {\n    return this.http.get(this.alertData);\n  }\n\n  onWillDismiss(event: Event) {\n    const ev = event as CustomEvent<OverlayEventDetail<string>>;\n    if (ev.detail.role === 'confirm') {\n      this.message = `Hello`;\n    }\n  }\n\n  getDefSource() {\n    this.serve.getSourceData('https://wayofvod.com/dovshop/source.json').subscribe(data => {\n      this.deflist = data['sources'].packages;\n      console.log(this.deflist);\n      //console.log(this.deflist)\n    })\n  }\n\n  removeItem(i: any) {\n    //this.storage.remove('source');\n    //this.sourceList = null;\n    this.sourceList.splice(i, 1);\n    this.storage.set('source', this.sourceList);\n    this.urlList.splice(i, 1);\n    this.storage.set('url', this.urlList);\n\n  }\n\n  getData(str) {\n    this.loadData();\n    this.serve.getSourceData(str).subscribe(data => {\n      this.addList = data['sources'];\n      const item = <StorageItem>this.addList[0];\n      this.arr.push(item);\n      this.storage.set('source', this.arr);\n    })\n  }\n\n  loadData() {\n    this.storage.get('source').then(res => {\n      if(!res) {\n        this.sourceList = [];\n        this.arr = [];\n      } else {\n        this.sourceList = res;\n        this.arr = res;\n      }\n    })\n    this.storage.get('url').then(res => {\n      if(!res) {\n        this.urlList = [];\n      } else {\n        this.urlList = res;\n      }\n    });\n  }\n\n  async addSource() {\n    const alert = await this.alertController.create({\n      header: 'Add Source',\n      subHeader: 'Enter dovShop Source URL',\n      buttons: [{\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: () => {\n                console.log('Confirm Cancel');\n            }\n        }, \n        {\n            text: 'Ok',\n            handler: (aData) => { //takes the data \n                this.alertData = aData.source;\n                this.getData(this.alertData);\n                this.showLoading();\n                this.urlList.push(this.alertData);\n                console.log(this.urlList);\n                this.storage.set('url', this.urlList);\n            }\n        }],\n      inputs: [\n        {\n          type: 'url',\n          name: 'source',\n          value: 'https://'\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  openBrowser(url) {\n    const browser = this.iab.create(url, '_blank', 'location=yes,toolbarposition=top,toolbartranslucent=no');\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}